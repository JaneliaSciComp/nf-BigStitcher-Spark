params {
    runtime_opts                           = ''
    bigstitcher_work_dir                   = 'work'
    bigstitcher_distributed                = true
    bigstitcher_spark_workers              = 1
    bigstitcher_min_spark_workers          = 1
    bigstitcher_spark_worker_cpus          = 1
    bigstitcher_spark_mem_gb_per_cpu       = 5
    bigstitcher_spark_driver_cpus          = 1
    bigstitcher_spark_driver_mem_gb        = 5
}

process {

    withName:"(.*)?BIGSTITCHER_SPARK.*:.*" {
        // all processes that run as part of the multiscale workflow
        // use this container
        container = 'ghcr.io/janeliascicomp/bigstitcher:2.4.1-spark3.3.2-scala2.12-java17-ubuntu24.04'
        containerOptions = params.runtime_opts
        errorStrategy = 'terminate'

        ext.spark_local_dir = 'work/spark-local-tmp'
    }

}
