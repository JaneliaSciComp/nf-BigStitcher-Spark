params {
    work_dir             = 'work'
    distributed          = true
    spark_workers        = 1
    min_spark_workers    = 1
    spark_worker_cpus    = 1
    spark_mem_gb_per_cpu = 15
    spark_driver_cpus    = 1
    spark_driver_mem_gb  = 15
}

process {

    withName:"(.*)?BIGSTITCHER_SPARK.*:.*" {
        // all processes that BigStitcher tasks use this container
        container = 'ghcr.io/janeliascicomp/bigstitcher:2.4.1-spark3.3.2-scala2.12-java17-ubuntu24.04'
        containerOptions = params.container_runtime_opts
        errorStrategy = 'terminate'

        ext.spark_local_dir = "${params.work_dir}/spark-local-tmp"
    }

}
